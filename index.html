SwapCart — Full MVP (Deployable)

> This document contains a single-file, GitHub-ready project: index.html (frontend + JS) + setup README. Deploy on GitHub Pages or Firebase Hosting. Uses Firebase (Auth, Firestore, Storage).




---

What you will find below

1. README — setup & deploy steps (copy/paste).


2. index.html — full single-page app: auth, add item, browse, propose swap, accept swap, profile, basic admin view.



> Important: Replace the placeholder FIREBASE_CONFIG in README/index.html with your Firebase project config.




---

README (Quick start)

Steps (10 minutes)

1. Go to https://console.firebase.google.com and Create a new project (follow defaults).


2. In Project Overview -> Add app -> Web app. Register app (name e.g., swapcart-web).


3. Copy the Firebase config object shown (looks like { apiKey: "...", authDomain: "...", projectId: "...", storageBucket: "...", messagingSenderId: "...", appId: "..." }).


4. In the index.html below replace the // TODO: PASTE FIREBASE CONFIG HERE section with your config object (keep the surrounding const firebaseConfig = {...};).


5. In Firebase Console -> Authentication -> Sign-in method -> Enable Email/Password and Google (optional).


6. Firestore: Create Cloud Firestore in production or test mode (for MVP, test mode ok). Create rules as needed — the default test rules are fine for now.


7. Storage: Enable Firebase Storage, default rules OK for MVP.



Deploy options

GitHub Pages (quick)

Create a new GitHub repo. Upload only index.html. In repo settings -> Pages -> set branch main and folder / (root) -> Save. Your site will be live at https://<username>.github.io/<repo>.


Firebase Hosting (recommended later)

Install Firebase tools (if you want CLI): npm install -g firebase-tools.

firebase login then firebase init and choose Hosting).

Deploy: firebase deploy --only hosting.


Admin setup

The app includes a simple admin flag: set isAdmin: true on a user document in users collection to give admin powers (via Firebase Console or Firestore UI).


Notes

This is an MVP: escrow is simulated via swap status flags and manual UPI steps. Real payment integration (UPI/Stripe/Paytm) requires backend functions and compliance.

For production, harden Firestore rules and Storage rules to prevent abuse.



---

index.html (single-file app)

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SwapCart — Swap safely in your city</title>
  <link rel="icon" href="data:;base64,iVBORw0KGgo=">
  <style>
    /* Simple modern styles (mobile-first) */
    :root{--accent:#059669;--muted:#94a3b8;background:#071129;color:#e6eef6}
    *{box-sizing:border-box}
    body{font-family:Inter,system-ui,Segoe UI,Roboto,Arial;margin:0;background:linear-gradient(180deg,#042b3a,#071129);color:var(--muted);min-height:100vh}
    .wrap{max-width:980px;margin:18px auto;padding:16px}
    header{display:flex;align-items:center;gap:12px}
    .logo{width:52px;height:52px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#06b6d4);display:flex;align-items:center;justify-content:center;font-weight:700;color:#062021}
    h1{margin:0;font-size:20px;color:#e6f5f0}
    p.lead{margin:6px 0 0;color:#bfe7db}
    .grid{display:grid;grid-template-columns:1fr;gap:12px;margin-top:12px}
    .card{background:rgba(255,255,255,0.03);padding:14px;border-radius:10px}
    .btn{background:var(--accent);color:#00241f;border:0;padding:8px 12px;border-radius:8px;font-weight:700;cursor:pointer}
    .outline{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted)}
    input,select,textarea{width:100%;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--muted);margin-top:8px}
    label{font-size:13px;color:#a7d9cc}
    .row{display:flex;gap:8px}
    .item-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:10px}
    .item{background:rgba(0,0,0,0.3);padding:10px;border-radius:10px}
    .small{font-size:13px;color:#9fcfbf}
    .muted{color:#9fb7ad}
    .hidden{display:none}
    footer{margin-top:14px;font-size:13px;color:#8fbfb0}
    @media(min-width:880px){.grid{grid-template-columns:2fr 1fr}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">SC</div>
      <div>
        <h1>SwapCart — Swap. Save. Trust.</h1>
        <p class="lead">List unused items, find fair swaps, and exchange safely in your city.</p>
      </div>
      <div style="margin-left:auto" id="authUI"></div>
    </header>

    <div class="grid">
      <div>
        <div class="card" id="addCard">
          <h3>Add / Manage Your Items</h3>
          <div id="userBox" class="small muted">Please login to list items.</div>

          <div id="addForm" class="hidden">
            <label>Title</label>
            <input id="title" placeholder="e.g., Wireless Earbuds" />
            <label>Category</label>
            <select id="category"><option>Electronics</option><option>Books</option><option>Clothes</option><option>Home</option><option>Other</option></select>
            <label>Condition</label>
            <select id="condition"><option>New</option><option>Like New</option><option>Used</option><option>Fair</option></select>
            <label>Approx Value (₹)</label>
            <input id="value" type="number" placeholder="e.g., 1500" />
            <label>Photos (1 min)</label>
            <input id="photos" type="file" accept="image/*" multiple />
            <label>Description</label>
            <textarea id="desc" rows="3" placeholder="Short description"></textarea>
            <div style="margin-top:8px;display:flex;gap:8px">
              <button class="btn" id="saveItem">Save Item</button>
              <button class="outline" id="myItemsBtn">My Items</button>
            </div>
            <div id="status" class="small muted" style="margin-top:8px"></div>
          </div>
        </div>

        <div class="card" style="margin-top:10px">
          <h3>Public Listings</h3>
          <div style="margin:8px 0;display:flex;gap:8px">
            <input id="search" placeholder="Search title or city" />
            <select id="filterCat"><option value="">All</option><option>Electronics</option><option>Books</option><option>Clothes</option><option>Home</option><option>Other</option></select>
          </div>
          <div id="items" class="item-grid"></div>
          <div id="loading" class="small muted">Loading...</div>
        </div>

        <div id="itemModal" class="card hidden" style="margin-top:10px">
          <div id="modalContent"></div>
        </div>

      </div>

      <div>
        <div class="card">
          <h3>Your Profile</h3>
          <div id="profileBox" class="small muted">Login to see profile.</div>
          <div id="profileActions" class="hidden" style="margin-top:8px">
            <button class="btn" id="verifyBtn">Request Verified Badge</button>
            <button class="outline" id="mySwapsBtn">My Swaps</button>
          </div>
        </div>

        <div class="card" style="margin-top:10px">
          <h3>How Swap Works</h3>
          <ol class="small">
            <li>List your item with photos and value.</li>
            <li>Find a matching item and propose swap.</li>
            <li>Decide local meetup or courier. Use escrow flag for safety.</li>
          </ol>
          <h4 style="margin-top:8px">Safety Tips</h4>
          <ul class="small">
            <li>Meet in public places; check ID before swapping.</li>
            <li>For courier, use tracked shipments and keep photos.</li>
            <li>Use verified users when possible.</li>
          </ul>
        </div>

        <div class="card" style="margin-top:10px">
          <h3>Admin</h3>
          <div id="adminBox" class="small muted">Admin tools hidden.</div>
        </div>
      </div>
    </div>

    <footer>
      <div class="small muted">Built for MVP: manual escrow & UPI off-app. For full escrow, integrate payment gateway and cloud functions later.</div>
    </footer>
  </div>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>

  <script>
  // --------------------------
  // TODO: PASTE FIREBASE CONFIG HERE
  // Replace the object below with your Firebase config from Firebase console
  // Example:
  // const firebaseConfig = {
  //   apiKey: "...",
  //   authDomain: "...",
  //   projectId: "...",
  //   storageBucket: "...",
  //   messagingSenderId: "...",
  //   appId: "..."
  // };
  // --------------------------

  const firebaseConfig = {
    // PASTE YOUR FIREBASE CONFIG OBJECT HERE
  };

  // Initialize
  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.firestore();
  const storage = firebase.storage();

  // DOM refs
  const authUI = document.getElementById('authUI');
  const addForm = document.getElementById('addForm');
  const userBox = document.getElementById('userBox');
  const profileBox = document.getElementById('profileBox');
  const profileActions = document.getElementById('profileActions');
  const statusEl = document.getElementById('status');
  const itemsEl = document.getElementById('items');
  const loading = document.getElementById('loading');
  const itemModal = document.getElementById('itemModal');
  const modalContent = document.getElementById('modalContent');
  const adminBox = document.getElementById('adminBox');

  let currentUser = null;

  // Simple Auth UI
  function renderAuthUI(){
    authUI.innerHTML = '';
    const user = auth.currentUser;
    if(user){
      const btn = document.createElement('button'); btn.className='outline'; btn.textContent='Logout'; btn.onclick=()=>auth.signOut();
      authUI.appendChild(btn);
    } else {
      const loginBtn = document.createElement('button'); loginBtn.className='btn'; loginBtn.textContent='Login / Signup';
      loginBtn.onclick = openLogin;
      authUI.appendChild(loginBtn);
    }
  }

  function openLogin(){
    const email = prompt('Enter email:');
    if(!email) return;
    const pass = prompt('Enter password (min 6 chars):');
    if(!pass) return;
    auth.signInWithEmailAndPassword(email, pass).then(()=>{
      console.log('logged in');
    }).catch(err=>{
      if(err.code==='auth/user-not-found'){
        auth.createUserWithEmailAndPassword(email, pass).then(()=>alert('Account created & logged in')).catch(e=>alert(e.message));
      } else alert(err.message);
    });
  }

  // Monitor auth state
  auth.onAuthStateChanged(async (user)=>{
    currentUser = user;
    renderAuthUI();
    if(user){
      // Ensure user document exists
      const udoc = db.collection('users').doc(user.uid);
      const snap = await udoc.get();
      if(!snap.exists){
        await udoc.set({email:user.email, name:user.displayName||'', city:'', createdAt: firebase.firestore.FieldValue.serverTimestamp(), isAdmin:false, verified:false});
      }
      addForm.classList.remove('hidden');
      userBox.innerHTML = `Logged in as <strong>${user.email}</strong>`;
      profileBox.innerHTML = `<div><strong>${user.email}</strong></div><div class="small muted">City: <span id=citySpan></span></div>`;
      profileActions.classList.remove('hidden');
      const u = await udoc.get();
      const data = u.data();
      document.getElementById('citySpan').textContent = data.city||'Not set';

      // show admin if user is admin
      if(data.isAdmin) adminBox.innerHTML = '<button class="btn" id="openAdmin">Open Admin</button>';
      else adminBox.innerHTML = 'Admin tools hidden.';

    } else {
      addForm.classList.add('hidden');
      profileBox.innerHTML = 'Login to see profile.';
      profileActions.classList.add('hidden');
      adminBox.innerHTML = 'Admin tools hidden.';
    }
    loadItems();
  });

  // Save item
  document.getElementById('saveItem').addEventListener('click', async ()=>{
    if(!currentUser) return alert('Login first');
    const title = document.getElementById('title').value.trim();
    const cat = document.getElementById('category').value;
    const cond = document.getElementById('condition').value;
    const value = Number(document.getElementById('value').value)||0;
    const desc = document.getElementById('desc').value.trim();
    const photos = document.getElementById('photos').files;
    if(!title || photos.length===0) return alert('Please add title and at least one photo');
    statusEl.textContent = 'Uploading images...';
    const images = [];
    for(let i=0;i<photos.length;i++){
      const f = photos[i];
      const ref = storage.ref().child(`items/${currentUser.uid}_${Date.now()}_${f.name}`);
      await ref.put(f);
      const url = await ref.getDownloadURL();
      images.push(url);
    }
    statusEl.textContent = 'Saving item...';
    const doc = {
      title, category:cat, condition:cond, value, desc, images, ownerId: currentUser.uid, ownerEmail: currentUser.email, city:'', createdAt: firebase.firestore.FieldValue.serverTimestamp(), status:'active'
    };
    await db.collection('items').add(doc);
    statusEl.textContent = 'Item added!';
    // clear
    document.getElementById('title').value=''; document.getElementById('value').value=''; document.getElementById('desc').value=''; document.getElementById('photos').value='';
    setTimeout(()=>statusEl.textContent='','2000');
    loadItems();
  });

  // Load public items
  async function loadItems(){
    itemsEl.innerHTML=''; loading.style.display='block';
    const q = await db.collection('items').where('status','==','active').orderBy('createdAt','desc').limit(100).get();
    if(q.empty){ itemsEl.innerHTML='<div class="small">No items yet.</div>'; loading.style.display='none'; return; }
    q.forEach(doc=>{
      const d=doc.data();
      const el = document.createElement('div'); el.className='item';
      const img = d.images && d.images[0] ? `<img src="${d.images[0]}" style="width:100%;height:140px;object-fit:cover;border-radius:8px">` : '';
      el.innerHTML = `${img}<div style="margin-top:8px"><strong style="color:#e6f5f0">${d.title}</strong></div><div class="small">${d.category} • ₹${d.value}</div><div style="margin-top:6px"><button class="btn" onclick="openItem('${doc.id}')">View</button></div>`;
      itemsEl.appendChild(el);
    });
    loading.style.display='none';
  }

  // Open item (global func)
  window.openItem = async function(id){
    const doc = await db.collection('items').doc(id).get();
    if(!doc.exists) return alert('Item not found');
    const d = doc.data();
    modalContent.innerHTML = `<h3 style=\"color:#e6f5f0\">${d.title}</h3><div class='small muted'>${d.category} • ₹${d.value}</div><div style=\"margin-top:8px\">${d.desc}</div><div style=\"margin-top:8px\">${d.images.map(i=>`<img src=\"${i}\" style=\"width:100%;margin-top:6px;border-radius:8px\">`).join('')}</div><div style=\"margin-top:8px\">Owner: ${d.ownerEmail}</div><div style=\"margin-top:8px\">Status: ${d.status}</div><div style=\"margin-top:8px\"><button class=\"btn\" id=\"proposeBtn\">Propose Swap</button></div>`;
    itemModal.classList.remove('hidden');
    document.getElementById('proposeBtn').onclick = ()=>proposeSwap(id);
  }

  // Propose swap
  async function proposeSwap(itemId){
    if(!currentUser) return alert('Login to propose');
    // get user's active items
    const myItemsSnap = await db.collection('items').where('ownerId','==',currentUser.uid).where('status','==','active').get();
    let offerItemId = null;
    if(myItemsSnap.empty){
      const add = confirm('You have no items to offer. Do you want to offer cash instead? Click OK to offer cash.');
      if(!add) return;
      const cash = prompt('Enter cash offer amount (₹)');
      offerItemId = null;
      await db.collection('swaps').add({itemId, proposerId: currentUser.uid, proposerEmail: currentUser.email, offerItemId:null, cashOffer: Number(cash)||0, status:'pending', createdAt: firebase.firestore.FieldValue.serverTimestamp()});
      alert('Swap proposed with cash. Owner will be notified.');
      return;
    }
    // build simple choice
    let choices = [];
    myItemsSnap.forEach(d=>choices.push({id:d.id, data:d.data()}));
    // simple prompt-based selection
    let list = choices.map((c,i)=>`${i+1}. ${c.data.title} • ₹${c.data.value}`).join('
');
    const sel = prompt('Choose item to offer:
'+list+'
Enter number');
    const idx = Number(sel)-1; if(idx<0 || idx>=choices.length) return alert('Invalid');
    offerItemId = choices[idx].id;
    await db.collection('swaps').add({itemId, proposerId: currentUser.uid, proposerEmail: currentUser.email, offerItemId, cashOffer:0, status:'pending', createdAt: firebase.firestore.FieldValue.serverTimestamp()});
    alert('Swap proposed. Owner will be notified.');
  }

  // Listen to swaps for owner notifications (simple poll)
  setInterval(async ()=>{
    if(!currentUser) return;
    const q = await db.collection('swaps').where('proposerId','!=',currentUser.uid).where('status','==','pending').get();
    // naive: owner should poll swaps where their item is targeted; skip complexity in MVP
  },15000);

  // My Items button
  document.getElementById('myItemsBtn').addEventListener('click', async ()=>{
    if(!currentUser) return alert('Login first');
    const q = await db.collection('items').where('ownerId','==',currentUser.uid).get();
    modalContent.innerHTML = '<h3>Your items</h3>' + (q.empty?'<div class=\"small\">No items</div>':'') + '<div>' + q.docs.map(d=>`<div class=\"item\"><strong>${d.data().title}</strong><div class=\"small\">${d.data().category} • ₹${d.data().value}</div><div style=\"margin-top:6px\"><button class=\"btn\" onclick=\"viewMyItem(\'${d.id}\')\">View</button></div></div>`).join('') + '</div>';
    itemModal.classList.remove('hidden');
  });

  window.viewMyItem = async function(id){
    const doc = await db.collection('items').doc(id).get(); if(!doc.exists) return;
    const d = doc.data();
    modalContent.innerHTML = `<h3>${d.title}</h3><div class=\"small\">${d.category} • ₹${d.value}</div><div style=\"margin-top:8px\">${d.desc}</div><div style=\"margin-top:8px\"><button class=\"btn\" onclick=\"markInactive(\'${id}\')\">Mark Inactive</button></div>`;
  }

  window.markInactive = async function(id){ if(!confirm('Mark this item inactive?')) return; await db.collection('items').doc(id).update({status:'inactive'}); alert('Marked inactive'); loadItems(); itemModal.classList.add('hidden'); }

  // Propose handling for owners: simple manual flow via Firestore query (owner finds swaps targeted at their items)
  document.getElementById('mySwapsBtn').addEventListener('click', async ()=>{
    if(!currentUser) return alert('Login first');
    const q = await db.collection('swaps').where('status','==','pending').get();
    // Filter swaps where the item belongs to current user
    const list = [];
    for(const doc of q.docs){
      const s = doc.data();
      const itemDoc = await db.collection('items').doc(s.itemId).get();
      if(itemDoc.exists && itemDoc.data().ownerId===currentUser.uid){
        list.push({id:doc.id, data:s, item:itemDoc.data()});
      }
    }
    if(list.length===0){ alert('No pending swaps for your items'); return; }
    let text = list.map((l,i)=>`${i+1}. ${l.item.title} ← ${l.data.proposerEmail} (Offer item: ${l.data.offerItemId? 'See their items':'Cash ₹'+l.data.cashOffer})`).join('
');
    const sel = prompt('Pending swaps:
'+text+'
Enter number to manage');
    const idx = Number(sel)-1; if(idx<0||idx>=list.length) return;
    const selSwap = list[idx];
    const action = prompt('Enter A to Accept, R to Reject, C to Counter');
    i
